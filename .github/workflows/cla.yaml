name: cla-check

on:
  pull_request:
    branches:
      - main
      - 'release-[0-9]+.[0-9]+'

permissions:
  contents: read
      
jobs:
  cla-check:
    permissions:
      pull-requests: write  # for canonical/has-signed-canonical-cla to create & update comments
    runs-on: ubuntu-latest
    steps:
      - name: Harden Runner
        uses: step-security/harden-runner@f086349bfa2bd1361f7909c78558e816508cdc10 # v2.8.0
        with:
          egress-policy: audit
      - name: Check if CLA signed
        uses: canonical/has-signed-canonical-cla@046337b42822b7868ad62970988929c79f9c1d40 # v1
